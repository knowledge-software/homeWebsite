#!/usr/local/perl -w#=begin documentation	This is a simple Perl script to fetch the source html from a given site and extract a list of embedded images.	The first argument is the URL to grab and an optional second is the destination file to save the image itself.	The later piece can be modified to grab a particular image.=cut $baseURL  = $ARGV[0];($destFile = $ARGV[1]) =~ s/\:\.\:dasBoot(.+)/$1/;   $srchStr  = $ARGV[2];## Startup volumes are special.  They are not listed in the VOLUMES folder.##	Open a stream to the source so we can read it as a stream#	n.b. we could have used a fork but this would require us to load the whole thing into memory.if ( !open( URLPATH, "curl -fs $baseURL |") ) {	die "Can't open $baseURL\n";	}##	Grab the whole kit and caboodle into the array wholething.  n.b. we did this anyway but we didn't have to.while( <URLPATH> ) {	push( @wholething, split );  # by default I have split on whitespace	}#print join( "\n", @wholething);  # DBG check contents of "wholething"##	Build a list of img tags.  Store only the URLs of the contents$index = 0;	# this isn't actually required but it makes me happyif ( $#wholething > 2 ) {	foreach( split( /\</, join( " ", @wholething ) ) ) {		chop;		if ( m/img/ ) {			($imgList[$index++] = $_) =~ s!.+src *=\"([\w:/\.]+).*!$1!;			}		}	}##	At this point we have a list in imgList#	print join( "\n", @imgList);	# DBG check imagelist#       http://images.ucomics.com#	Go through the list and print the one image file we want.foreach( @imgList ) {	$gifFile = $_ if m/.+comics\/$srchStr.+/;	}#	print $gifFile if $gifFile;  # DBG check found image file.#if $gifFile {	`curl -fs $gifFile >$destFile`;	print $destFile, "\n";#	}exit(0);